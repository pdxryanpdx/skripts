



function soulGuardian(p: player):
        set name of last spawned zombie to "&8&lSoul Guardian"
        set tool of the last spawned zombie to stone shovel
        set helmet of the last spawned zombie to chainmail helmet
        set chestplate of the last spawned zombie to chainmail chestplate
        set leggings of the last spawned zombie to chainmail leggings
        set boots of the last spawned zombie to chainmail boots
        enchant helmet of the last spawned zombie with protection 2
        enchant chestplate of the last spawned zombie with protection 2
        enchant leggings of the last spawned zombie with protection 2
        enchant boots of the last spawned zombie with protection 2
        enchant tool of the last spawned zombie with sharpness 5
        enchant tool of the last spawned zombie with unbreaking 1000
        enchant helmet of the last spawned zombie with unbreaking 1000
        enchant chestplate of the last spawned zombie with unbreaking 1000
        enchant leggings of the last spawned zombie with unbreaking 1000 
        enchant boots of the last spawned zombie with unbreaking 1000
        enchant boots of the last spawned zombie with feather falling 1000

function fireRat(p: player):
        set name of last spawned silverfish to "&4&lFire Rat"
        apply health boost 10 to the last spawned silverfish for 9999 minutes
        apply strength 5 to the last spawned silverfish for 9999 minutes
        apply fire resistance 1000 to the last spawned silverfish for 9999 minutes

function kothWave1(p: player):  
        spawn an adult zombie at {wnss}
        soulGuardian({_p})
        wait 1 tick
        spawn a adult zombie at {wsss}
        soulGuardian({_p})
        wait 1 tick
        spawn an adult zombie at {esss}
        soulGuardian({_p}) 
        wait 1 tick
        spawn an adult zombie at {enss}
        soulGuardian({_p})
        add 4 to {alivemobs}
        wait 1 ticks


options: 
    # the text before all koth messages
    logo: &4&lKOTH &7â¤ž
    # ammount of between annoucement and koth start time
    pt: 2
    # ammount of time between teleport and wave 1
    st: 2


on script load:
#Put your coordniates in the correct location found below
    set {nss1} to location(178, 74, -100, world "world")
    set {nss2} to location(180, 74, -101, world "world")
    set {nss3} to location(182, 74, -100, world "world")
    set {ess1} to location(188, 74, -94, world "world")
    set {ess2} to location(189, 74, -92, world "world")
    set {ess3} to location(188, 74, -90, world "world")
    set {sss1} to location(182, 74, -84, world "world")
    set {sss2} to location(189, 74, -83, world "world")
    set {sss3} to location(178, 74, -84, world "world")
    set {wss1} to location(172, 74, -90, world "world")
    set {wss2} to location(171, 74, -92,world "world")
    set {wss3} to location(172, 74, -94, world "world")
    set {wnss} to location(175, 74, -97, world "world")
    set {enss} to location(185, 74, -97,world "world")
    set {esss} to location(185, 74, -87, world "world")
    set {wsss} to location(175, 74, -87, world "world")
    set {mss} to location(180,74, -92, world "world")
    broadcast "{@logo} &cVariables have been set"

#queue
command /kothqueue: 
    trigger: 
        if "%region at player%" contains "kothwaiting":
            if player's name is equal to {kothqueue::*}:
                message "{@logo} &cYou are already in Koth Queue"
            else:
                add player's name to {kothqueue::*}
                message "{@logo} &cYou've been added to Koth Queue" to player
        else: 
            message "Sorry you are not close enough to KOTH to Queue" to player
#unqueue
command /kothunqueue: 
    trigger:
        remove player's name from {kothqueue::*}
        message "{@logo} &cYou've been removed from Koth Queue" to player
#check queue
command /kothstatus:
    trigger:
        send "{@logo} &7Koth Status"
        send "&7%{kothqueue::*}%" to player
        send "&7If no names are listed, there are no players in queue" to player
        send "&7%{alivemobs}%" to player
        send "&7mobs alive" to player

command /kothforcereset:
    trigger:
        set {wave1} to 0
        wait 10 ticks
        set {alivemobs} to 0
        send "{@logo} &cReset KOTH" to player
 
#forcestart
command /kothstart:
    trigger:
        broadcast "{@logo} &cKOTH will start in {@pt} seconds"
        wait {@pt} seconds
        broadcast {kothqueue::*}
        loop {kothqueue::*}:
            teleport loop-value parsed as player to location 180.5, 71, -91.5 in world "world"
            send "{@logo} &cKOTH will start in {@st} seconds"
        wait {@st} seconds    
        if "%region at player%" contains "koth":   
            send "{@logo} &cWave 1 has started!" to players
            set {wave1} to 1
            loop 3 times:
                kothWave1(player)
        wait 5 seconds
        if {wave1} is 1:
            loop 100 times:
                if {alivemobs} is 0:
                    if "%region at player%" contains "koth": 
                        set {wave1} to 0 
                        send "{@logo} &cWave 1 has been complete! You have 5 seconds to prepare for wave 2" to all players
                        wait 10 ticks
                        set {alivemobs} to 1
                        wait 5 seconds
                        if "%region at player%" contains "koth":
                            send "{@logo} &cWave 2 has started!" to all players

                wait 1 seconds
        else:
            stop
# readd remove player from queue

command /armor:
    trigger:
        enchant player's tool with protection 30
        enchant player's tool with unbreaking 30
        enchant player's tool with sharpness 5
